{% load static %}
<!doctype html>
<html
        lang="en"
        class="layout-wide customizer-hide"
        dir="ltr"
        data-skin="default"
        data-assets-path="{% static 'assets' %}"
        data-template="vertical-menu-template"
        data-bs-theme="light">
<head>
    <meta charset="utf-8"/>
    <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
    <title>ই-প্রশ্ন ব্যাংক | লগিন</title>
    <meta name="description" content=""/>
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{% static 'assets/img/favicon/favicon.ico' %}"/>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&display=swap"
          rel="stylesheet">
    <style>
        body {
            /* এই লাইনটি সবচেয়ে গুরুত্বপূর্ণ */
            font-family: 'Hind Siliguri', sans-serif !important;

            background-color: #f4f4f9;
            color: #333;
        }

        /* ... আপনার বাকি স্টাইল ... */
    </style>
    <link rel="stylesheet" href="{% static 'assets/vendor/fonts/iconify-icons.css' %}"/>
    <!-- Core CSS -->
    <!-- build:css assets/vendor/css/theme.css  -->
    <link rel="stylesheet" href="{% static 'assets/vendor/libs/node-waves/node-waves.css' %}"/>
    <link rel="stylesheet" href="{% static 'assets/vendor/libs/pickr/pickr-themes.css' %}"/>
    <link rel="stylesheet" href="{% static 'assets/vendor/css/core.css' %}"/>
    <link rel="stylesheet" href="{% static 'assets/css/demo.css' %}"/>
    <!-- Vendors CSS -->
    <link rel="stylesheet" href="{% static 'assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css' %}"/>
    <!-- endbuild -->
    <!-- Vendor -->
    <link rel="stylesheet" href="{% static 'assets/vendor/libs/@form-validation/form-validation.css' %}"/>
    <!-- Page CSS -->
    <!-- Page -->
    <link rel="stylesheet" href="{% static 'assets/vendor/css/pages/page-auth.css' %}"/>
    <!-- Helpers -->
    <script src="{% static 'assets/vendor/js/helpers.js' %}"></script>
    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
    <!--? Template customizer: To hide customizer set displayCustomizer value false in config.js.  -->
    <script src="{% static 'assets/vendor/js/template-customizer.js' %}"></script>
    <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
    <script src="{% static 'assets/js/config.js' %}"></script>
</head>
<body>


{% block content %}
    <div class="container-xxl">
        <div class="authentication-wrapper authentication-basic container-p-y">
            <div class="authentication-inner py-6">
                <div class="card">
                    <div class="card-body">
                        <div class="app-brand justify-content-center mb-6">
                            <a href="{% url 'signup' %}" class="app-brand-link">
                                <span class="app-brand-text demo text-heading fw-bold">ই-প্রশ্ন ব্যাংক</span>
                            </a>
                        </div>
                        <div style="text-align: center; color: #007bff;">
                            <h4 style="color: #0dcaf0;" class="mb-1">নতুন একাউন্ট তৈরী করুন</h4>
                            <p style="color: #0dcaf0;" class="mb-6">আপনার তথ্য দিয়ে রেজিস্ট্রেশন সম্পন্ন করুন</p>
                        </div>

                        {% if form.errors %}
                            <div class="alert alert-danger" role="alert">
                                {% for field, errors in form.errors.items %}
                                    {% for error in errors %}
                                        <p>{{ error }}</p>
                                    {% endfor %}
                                {% endfor %}
                            </div>
                        {% endif %}

                        <form id="formAuthentication" class="mb-6" method="POST">
                            {% csrf_token %}

                            <div class="mb-3">
                                <label for="{{ form.username.id_for_label }}"
                                       class="form-label">{{ form.username.label }}</label>
                                {{ form.username }}
                            </div>

                            <div class="mb-3">
                                <label for="{{ form.division.id_for_label }}"
                                       class="form-label">{{ form.division.label }}</label>
                                {{ form.division }}
                            </div>

                            <div class="mb-3">
                                <label for="{{ form.district.id_for_label }}"
                                       class="form-label">{{ form.district.label }}</label>
                                {{ form.district }}
                            </div>

                            <div class="mb-3">
                                <label for="{{ form.thana.id_for_label }}"
                                       class="form-label">{{ form.thana.label }}</label>
                                {{ form.thana }}
                            </div>

                            <div class="mb-3 form-password-toggle">
                                <label class="form-label"
                                       for="{{ form.password.id_for_label }}">{{ form.password.label }}</label>
                                <div class="input-group input-group-merge">
                                    {{ form.password }}
                                </div>
                            </div>

                            <div class="mb-3 form-password-toggle">
                                <label class="form-label"
                                       for="{{ form.password2.id_for_label }}">{{ form.password2.label }}</label>
                                <div class="input-group input-group-merge">
                                    {{ form.password2 }}
                                </div>
                            </div>

                            <button class="btn btn-info d-grid w-100" type="submit">একাউন্ট তৈরী করুন</button>
                        </form>

                        <p class="text-center">
                            <span>আপনার কি একাউন্ট করা আছে?</span>
                            <a href="{% url 'login' %}"><span>লগইন করুন</span></a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const divisionSelect = document.getElementById('id_division');
            const districtSelect = document.getElementById('id_district');
            const thanaSelect = document.getElementById('id_thana');

            const districtUrl = "{% url 'ajax_load_districts' %}";
            const thanaUrl = "{% url 'ajax_load_thanas' %}";

            // Initially disable district and thana selects
            districtSelect.disabled = true;
            thanaSelect.disabled = true;

            divisionSelect.addEventListener('change', function () {
                const division = this.value;
                districtSelect.innerHTML = '<option value="">----- জেলা নির্বাচন করুন -----</option>';
                thanaSelect.innerHTML = '<option value="">----- থানা নির্বাচন করুন -----</option>';
                districtSelect.disabled = true;
                thanaSelect.disabled = true;

                if (division) {
                    fetch(`${districtUrl}?division=${division}`)
                        .then(response => response.json())
                        .then(data => {
                            data.forEach(function (district) {
                                const option = new Option(district, district);
                                districtSelect.appendChild(option);
                            });
                            districtSelect.disabled = false;
                        })
                        .catch(error => console.error('Error fetching districts:', error));
                }
            });

            districtSelect.addEventListener('change', function () {
                const division = divisionSelect.value;
                const district = this.value;
                thanaSelect.innerHTML = '<option value="">----- থানা নির্বাচন করুন -----</option>';
                thanaSelect.disabled = true;

                if (district) {
                    fetch(`${thanaUrl}?division=${division}&district=${district}`)
                        .then(response => response.json())
                        .then(data => {
                            data.forEach(function (thana) {
                                const option = new Option(thana, thana);
                                thanaSelect.appendChild(option);
                            });
                            thanaSelect.disabled = false;
                        })
                        .catch(error => console.error('Error fetching thanas:', error));
                }
            });
        });
    </script>
{% endblock %}
</body>
</html>
